<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRAME.ARCHIVE</title>
    <style>
        body {
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

#cameraViewContainer {
    width: 40vh;
    height: 40vh;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    overflow: hidden;
    background-color: black;
    z-index: 2;
}

        #cameraView {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #startCameraButton {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            color: white;
            font-size: 14rem;
            border: none;
            cursor: pointer;
            outline: none;
            opacity: 1;
            transition: opacity 3.3s;
            z-index: 9;
        }

        #startCameraButton:hover {
            opacity: 1;
        }

#takePhotoButton {
    position: absolute;
    top: 80%;
    right: 22%;
    background-color: white;
    color: black;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    padding: 0;
    border: none;
    cursor: pointer;
    outline: none;
    z-index: 5;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0.7;
    transition: opacity 2.2s;
}

#takePhotoButton:hover {
    opacity: 0.4;
}

    </style>
</head>
<body>
    <div id="cameraViewContainer">
        <video id="cameraView" autoplay></video>
    </div>
    <button id="startCameraButton" onclick="toggleFullscreen()">â§‰</button>
    <button id="takePhotoButton" disabled></button>
    <canvas id="photoCanvas" style="display: none;"></canvas>
    
    <script>
        const cameraView = document.getElementById('cameraView');
        const startCameraButton = document.getElementById('startCameraButton');
        const takePhotoButton = document.getElementById('takePhotoButton');
        const photoCanvas = document.getElementById('photoCanvas');
        const canvasContext = photoCanvas.getContext('2d');
        let stream;

        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: true });
                cameraView.srcObject = stream;
                startCameraButton.disabled = true;
                takePhotoButton.disabled = false;
                startCameraButton.style.opacity = '0';
                startCameraButton.style.pointerEvents = 'none'
            } catch (error) {
                console.error('Error accessing the camera:', error);
            }
        }

        function takePhoto() {
            if (stream) {
                cameraView.pause();
                photoCanvas.width = cameraView.videoWidth;
                photoCanvas.height = cameraView.videoHeight;
                canvasContext.drawImage(cameraView, 0, 0, photoCanvas.width, photoCanvas.height);
                const photoDataUrl = photoCanvas.toDataURL('image/jpeg');
                console.log('Photo taken:', photoDataUrl);
                cameraView.play();
            }
        }

        startCameraButton.addEventListener('click', () => {
            startCamera();
        });

        function toggleFullscreen() {
            const docElement = document.documentElement;

            if (docElement.requestFullscreen) {
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                } else {
                    docElement.requestFullscreen().catch(err => {
                        console.error('Error attempting to enable fullscreen:', err);
                    });
                }
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            takePhotoButton.addEventListener('click', takePhoto);
        });
    </script>
</body>
</html>
